<script>
	/* JS dictionary */
	Dict = {
		form: {
			errEmpty: "<?php echo $dict['form_errEmpty'];?>",
			err400: "<?php echo $dict['form_err400'];?>",
			err403: "<?php echo $dict['form_err403'];?>",
			err500: "<?php echo $dict['form_err500'];?>",
			ok: "<?php echo $dict['form_ok'];?>"
		}
	};


	var design = new Design(["intro"]);
	/*var debug = new Debugger();*/
	var menu = new Menu();
	var pageScroll = new PageScroll();
	var bgscroll = new BgScroll();
	var flashMessage = new FlashMessage();
	var preview = new Preview(<?php echo $references_json; ?>);
	var contactForm = new ContactForm(flashMessage);
	var animations = new Animations();
	var preloader = new Preloader();

	window.addEventListener('load', () => {
		new window.ChatWidget({ defaultLanguage: '<?php echo $lang; ?>', apiBase: '/api' });
	});

</script>

<!-- Google Analytics -->
<?php if ($dict["devMode"] == 0):?>
	<script>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', '<?php echo $dict["googleAnalyticsCode"]; ?>']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
<?php endif; ?>

<!-- Google tag (gtag.js) -->
<?php if ($dict["devMode"] == 0):?>
	<?php $__googleTagCode = $dict["googleTagManagerCode"]; ?>

	<script async src="https://www.googletagmanager.com/gtag/js?id=<?php echo $__googleTagCode; ?>"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', '<?php echo $__googleTagCode; ?>');
	</script>
<?php endif; ?>
